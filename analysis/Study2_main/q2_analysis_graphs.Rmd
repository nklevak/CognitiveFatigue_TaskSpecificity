---
title: "q2_analysis_graphs"
output: html_document
date: "2025-01-26"
---
Do the same analysis from basic_modeling but make it cleaner and simpler; get graphs for 2 here (impact of switching on following performance and fatigue level)

POST EXCLUSION: should be 84


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r libraries}
library("knitr") # for knitting things
library("tidyverse") # for all things tidyverse
library("broom")      # for tidying up linear models 
library("car")        # for running ANOVAs
library("afex")       # also for running ANOVAs
library("emmeans")    # for calculating constrasts
library(jsonlite)
library(MASS, exclude = "select")
library(performance)
library(DHARMa)
library(effects)
library(rstatix, exclude="filter")  # For statistical tests
library(ggpubr)
library(patchwork)  # For combining plots


# set the default ggplot theme 
theme_set(theme_classic())
```


# READ IN DATA (these are all post-exclusion files from both batches)
``` {r data_loading}
# exp vars
sr_practice_num <- 4
sr_per_block <- 10
ds_practice_num <- 4
ds_per_block <- 10
rt_practice_num <- 4
rt_per__block_max <- 20
num_groups <- 10
num_blocks_per_group <- 3
num_blocks_overall <- num_groups * num_blocks_per_group

df_all <- read.csv("/Users/nastasiaklevak/Desktop/FYP_2024/CognitiveFatigue_TaskSpecificity/data_anonymized/SPRmain/excluded/SPRmain_main_trials_cleaned.csv",stringsAsFactors = FALSE) %>%
  select(-X)
df_practice <- read.csv("/Users/nastasiaklevak/Desktop/FYP_2024/CognitiveFatigue_TaskSpecificity/data_anonymized/SPRmain/excluded/SPRmain_practice_trials_cleaned.csv",stringsAsFactors = FALSE)%>%
  select(-X)
df_survey <- read.csv("/Users/nastasiaklevak/Desktop/FYP_2024/CognitiveFatigue_TaskSpecificity/data_anonymized/SPRmain/excluded/SPRmain_survey_cleaned.csv", stringsAsFactors = FALSE)%>%
  select(-X)
```

# QUESTIONS:
2) When does task switching reduce fatigue, if ever? i.e. how does performance differ in the block following a switch vs a non-switch, and how long is the subsequent self-paced rest (in comparison)

1. compare average accuracy in the block:
	1. following a switch vs following a stay
	2. account for game_type, block_num, group_num, 1|subj_id
	3.  can use "switched" or "stayed" as a predictor (create this variable after isolating those blocks)
2. compare number of rests taken in the rest after the first switched block vs in the rest after the first stayed block
	1. will be complicated to wrangle this
	2. account for game_type, block_num, group_num, 1|subj_id
	3. can use "switched" or "stayed" as a predictor (create this variable after isolating those blocks)
	


# MODELS
Keeping it simple; looking specifically at the effect of avg_block_accuracy and cue_type on the following rests per chunk; looking to see what breaks the effect as we make it more complicated (but don't add an unnecessary number of predictors and overfit)


# Q2 SPECIFIC PLOTS
